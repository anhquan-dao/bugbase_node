<launch>
  
	<node pkg="bugbase_node" type="driver_node.py" name="stepper_diff_wheeled" output="screen">
    <rosparam command="load" file="$(find bugbase_node)/cfg/bugbase.yaml" />
    <!-- <rosparam>
      port: '/dev/ttyUSB0'
      baudrate: 115200
      timeout: 0.1
      base_width: 0.26
      ticks_per_meter: 4904.7
      left_inverted: true
      right_inverted: true
      left_enc_inverted: false
      right_enc_inverted: false
      turn_direction: true
      acceleration: 5000
      use_dynamic_acceleration: true

    </rosparam> -->
	</node>

  <arg name="joy_dev" default="/dev/input/js0" />
  <arg name="joy_topic" default="joy" />
  
  <node pkg="joy" type="joy_node" name="joy_node">
    <param name="dev" value="$(arg joy_dev)" />
    <param name="deadzone" value="0.1" />
    <param name="autorepeat_rate" value="10" />
    <remap from="joy" to="$(arg joy_topic)" />
  </node>

  <!-- <node pkg="teleop_twist_joy" name="teleop_twist_joy" type="teleop_node">
    <param name="enable_button" value="8"/>
    <param name="enable_turbo_button" value="9"/>
    <param name="axis_angular" value="2"/>
    <param name="scale_linear"  value="1.0"/>
    <param name="scale_angular" value="1.5"/>
    <param name="scale_linear_turbo" value="1.0"/>
    <param name="scale_angular_turbo" value="1.5"/>
    <remap from="joy" to="$(arg joy_topic)" />
  </node> -->

  <arg name="port" value="/dev/ttyUSB_BNOimu"/>
  <arg name="topic" value="/imu/data"/>

  <!-- <node pkg="bno055_usb_stick" type="bno055_usb_stick_node" name="bno055_node">
    <param name="port" value="$(arg port)" />
    <remap from="/imu" to="$(arg topic)"/>
    < VERY IMPORTANT PARAMS 
    Do not change without consulting the owner(s) of this repo >
    <param name="publish_tf" value="false" />
    <param name="~frame_id" value="base_link" />

  </node>	

  <node name="odom_ekf" pkg="robot_localization" type="ekf_localization_node" clear_params="true">
	      <param name="reset_on_time_jump" value="true" />
        <param name="frequency" value="60"/>
        
       	<param name="sensor_timeout" value="0.1"/>
       	<param name="two_d_mode"     value="true"/>

       	<param name="odom0" value="odometry/wheel"/>
      	<param name="imu0" value="imu/data"/>
      	<remap from="odometry/filtered" to="odom/filtered_odom_baselink"/>

      	<param name="map_frame" value="map"/>
      	<param name="odom_frame" value="odom"/>
      	<param name="base_link_frame" value="base_link"/>
      	<param name="world_frame" value="odom"/>

      	<rosparam param="odom0_config">[false, false, false,
                                        false, false, false,
                                        true , true, false,
                                        false, false, true,
                                        false, false, false]</rosparam>

	

      	<rosparam param="imu0_config">[false, false, false,
                                       false, false, true ,
                                       false, false, false,
                                       false, false, false,
                                       true , true , true]</rosparam>

     	  <param name="odom0_queue_size" value="5"/>
       	<param name="imu0_queue_size" value="5"/>

      	<param name="imu0_remove_gravitational_acceleration" value="true"/>

      	<rosparam param="process_noise_covariance">[0.03, 0,    0,   0,    0,    0,    0,     0,     0,    0,     0,     0,     0,    0,    0,
                                                    0,    0.03, 0,   0,    0,    0,    0,     0,     0,    0,     0,     0,     0,    0,    0,
                                                    0,    0,    0.4, 0,    0,    0,    0,     0,     0,    0,     0,     0,     0,    0,    0,
                                                    0,    0,    0,   0.03, 0,    0,    0,     0,     0,    0,     0,     0,     0,    0,    0,
                                                    0,    0,    0,   0,    0.03, 0,    0,     0,     0,    0,     0,     0,     0,    0,    0,
                                                    0,    0,    0,   0,    0,    0.06, 0,     0,     0,    0,     0,     0,     0,    0,    0,
                                                    0,    0,    0,   0,    0,    0,    0.025, 0,     0,    0,     0,     0,     0,    0,    0,
                                                    0,    0,    0,   0,    0,    0,    0,     0.025, 0,    0,     0,     0,     0,    0,    0,
                                                    0,    0,    0,   0,    0,    0,    0,     0,     0.05, 0,     0,     0,     0,    0,    0,
                                                    0,    0,    0,   0,    0,    0,    0,     0,     0,    0.002, 0,     0,     0,    0,    0,
                                                    0,    0,    0,   0,    0,    0,    0,     0,     0,    0,     0.002, 0,     0,    0,    0,
                                                    0,    0,    0,   0,    0,    0,    0,     0,     0,    0,     0,     0.004, 0,    0,    0,
                                                    0,    0,    0,   0,    0,    0,    0,     0,     0,    0,     0,     0,     0.01, 0,    0,
                                                    0,    0,    0,   0,    0,    0,    0,     0,     0,    0,     0,     0,     0,    0.01, 0,
                                                    0,    0,    0,   0,    0,    0,    0,     0,     0,    0,     0,     0,     0,    0,    0.01]
        </rosparam>

       	<rosparam param="initial_estimate_covariance">[1e-9, 0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                         0,    1e-9, 0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                         0,    0,    1e-9, 0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                         0,    0,    0,    1e-9, 0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                         0,    0,    0,    0,    1e-9, 0,    0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                         0,    0,    0,    0,    0,    1e-9, 0,    0,    0,    0,     0,     0,     0,    0,    0,
                                                         0,    0,    0,    0,    0,    0,    1e-9, 0,    0,    0,     0,     0,     0,    0,    0,
                                                         0,    0,    0,    0,    0,    0,    0,    1e-9, 0,    0,     0,     0,     0,    0,    0,
                                                         0,    0,    0,    0,    0,    0,    0,    0,    1e-9, 0,     0,     0,     0,    0,    0,
                                                         0,    0,    0,    0,    0,    0,    0,    0,    0,    1e-9,  0,     0,     0,    0,    0,
                                                         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     1e-9,  0,     0,    0,    0,
                                                         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     1e-9,  0,    0,    0,
                                                         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     1e-9, 0,    0,
                                                         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    1e-9, 0,
                                                         0,    0,    0,    0,    0,    0,    0,    0,    0,    0,     0,     0,     0,    0,    1e-9]
          </rosparam>
    </node> -->

</launch>
